# 問題

- 後述の仕様を満たしながらユーザーのメールアドレスを変更する処理のテストコードの実装とリファクタリングをしてください。
- 後述の仕様は未実装のものがあります。ソースコードを読み未実装の仕様を実装してください。
- リファクタリング指針として、業務上のロジックと外部のシステム（データベースやメールサービス）に対しての処理を分離することを考えてください。

# 仕様

- もしユーザのメールアドレスに自社のドメイン名が含まれている場合、そのユーザの種類（userType）を従業員（EMPLOYEE）として登録し、そうでない場合は顧客（CUSTOMER）として登録する。
- 登録されたユーザの中から従業員となるユーザーの数（従業員数）を管理し、もし、ユーザの種類が従業員から顧客に変わるのであれば、従業員数を減らし、その逆に、顧客から従業員に変わるのであれば、従業員数を増やすようにする。
- メールアドレスの変更ができたら、メールサービス（Mailer）にメッセージを送り、メールアドレスが変更されたことを外部のシステムに通知する。
- 現在のメールアドレスが認証されているメールアドレス（isEmailConfirmed）のみ変更可能。
- 変更後のメールアドレスは未認証のものとして保存する。

# 制約

- Database.ktはRDBMS相当のものとみなして扱うこと。（MySQLなどのイメージ）
- Database.ktの実装は変更しないこと。
- Mailer.ktは外部のメールサービスにメッセージを送るものとして扱うこと。（SendGridなどのイメージ）
- Mailer.ktの実装は変更しないこと
